<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Management Dashboard</title>
    <link rel="stylesheet" href="../static/css/customer.css" />
    <link rel="stylesheet" href="https://www.canvasxpress.org/dist/canvasXpress.css" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="avatar"></div>
            <div class="username">Hihi HOHO</div>
            <ul class="sidebar-menu">
                <li><a href="#dashboard"><i class="fas fa-tachometer-alt"></i> Trang chủ</a></li>
                <li><a href="#customers"><i class="fas fa-users"></i> Quản lý khách hàng</a></li>
                <li><a href="#orders"><i class="fas fa-shopping-cart"></i> Đơn hàng</a></li>
                <li><a href="#revenue"><i class="fas fa-chart-line"></i> Báo cáo doanh thu</a></li>
                <li><a href="#logout" class="logout"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Header -->
            <div class="header">QUẢN LÝ KHÁCH HÀNG</div>

            <!-- Map and Stats -->
            <div class="map-stats-container">
                <div id="map" class="map"></div> <!-- Updated to focus on Vietnam map -->

                <!-- Stats -->
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-title">
                            <i class="fas fa-users"></i> Tổng khách hàng
                        </div>
                        <div class="stat-content">
                            <div class="number">15,689</div>
                            <div class="trend positive">
                                <i class="fas fa-arrow-up"></i> +5%
                            </div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-title">
                            <i class="fas fa-user-plus"></i> Khách hàng mới
                        </div>
                        <div class="stat-content">
                            <div class="number">+240</div>
                            <div class="trend positive">
                                <i class="fas fa-arrow-up"></i> +12%
                            </div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-title">
                            <i class="fas fa-shopping-cart"></i> Khách hàng đang đặt hàng
                        </div>
                        <div class="stat-content">
                            <div class="number">+450</div>
                            <div class="trend negative">
                                <i class="fas fa-arrow-down"></i> -3%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Search Bar -->
            <div class="search-bar-container">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm khách hàng..." />
                </div>
            
                <div class="sort-container">
                    <div class="sort-dropdown">
                        <button class="sort-btn">
                            <i class="fas fa-sort"></i> Sắp xếp theo <i class="fas fa-chevron-down"></i>
                        </button>
                        <ul class="sort-options">
                            <li data-sort="id">
                                <i class="fas fa-id-card"></i> Mã khách hàng
                            </li>
                            <li data-sort="creation-time">
                                <i class="fas fa-calendar-alt"></i> Thời gian tạo
                            </li>
                            <li data-sort="status">
                                <i class="fas fa-toggle-on"></i> Trạng thái
                            </li>
                        </ul>
                    </div>
                </div>
            </div>                  

            <!-- Table -->
            <div class="table">
                <div class="table-header">
                    <div>Mã khách hàng</div>
                    <div>Tên tài khoản</div>
                    <div>Thời gian tạo tài khoản</div>
                    <div>Trạng thái</div>
                    <div>Tác vụ</div>
                    <div>Xem chi tiết</div>
                </div>
                <div class="table-body">
                    <div class="table-row" data-customer="{
                        'id': '001',
                        'name': 'Nguyễn Văn Tí',
                        'dob': '01-01-1990',
                        'phone': '0901234567',
                        'email': 'nguyenvanti@example.com',
                        'address': '123 Đường ABC, TP.HCM',
                        'orders': '5',
                        'created_at': '01-01-2023',
                        'status': 'Đang giao hàng'
                    }">
                        <div>001</div>
                        <div>Nguyễn Văn Tí</div>
                        <div>01-01-2023</div>
                        <div><span class="status active">Đang giao hàng</span></div>
                        <div class="actions">
                            <button class="pin-btn"><i class="fas fa-thumbtack"></i> Ghim</button>
                            <button class="delete-btn"><i class="fas fa-trash"></i> Xóa</button>
                        </div>
                        <div><button class="detail-btn">Chi tiết</button></div>
                    </div>
                    <div class="table-row" data-customer='{
                        "id": "002",
                        "name": "Lê Văn Tèo",
                        "dob": "02-02-1995",
                        "phone": "0908765432",
                        "email": "levanteo@example.com",
                        "address": "456 Đường DEF, TP.HCM",
                        "orders": "2",
                        "created_at": "10-02-2023",
                        "status": "Từng đặt hàng"
                    }'>
                        <div>002</div>
                        <div>Lê Văn Tèo</div>
                        <div>10-02-2023</div>
                        <div><span class="status inactive">Từng đặt hàng</span></div>
                        <div class="actions">
                            <button class="pin-btn"><i class="fas fa-thumbtack"></i> Ghim</button>
                            <button class="delete-btn"><i class="fas fa-trash"></i> Xóa</button>
                        </div>
                        <div><button class="detail-btn">Chi tiết</button></div>
                    </div>                    
                    <div class="table-row">
                        <div>003</div>
                        <div>Nguyễn Thị Hihi </div>
                        <div>10-02-2023</div>
                        <div><span class="status active">Đang chờ lấy hàng</span></div>
                        <div class="actions">
                            <button class="pin-btn"><i class="fas fa-thumbtack"></i> Ghim</button>
                            <button class="delete-btn"><i class="fas fa-trash"></i> Xóa</button>
                        </div>
                    </div>
                    <div class="table-row">
                        <div>004</div>
                        <div>Nguyễn Thị Hoho</div>
                        <div>10-02-2023</div>
                        <div><span class="status active">Đang giao hàng </span></div>
                        <div class="actions">
                            <button class="pin-btn"><i class="fas fa-thumbtack"></i> Ghim</button>
                            <button class="delete-btn"><i class="fas fa-trash"></i> Xóa</button>
                        </div>
                    </div>
                    <div class="table-row">
                        <div>005</div>
                        <div>Trịnh Trần Phương Tứn </div>
                        <div>10-02-2023</div>
                        <div><span class="status inactive">Chưa từng đặt hàng</span></div>
                        <div class="actions">
                            <button class="pin-btn"><i class="fas fa-thumbtack"></i> Ghim</button>
                            <button class="delete-btn"><i class="fas fa-trash"></i> Xóa</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="customer-modal" class="modal">
                <div class="modal-content">
                    <span class="close-btn">&times;</span>
                    <h3>Thông tin chi tiết khách hàng</h3>
                    <p><strong>Họ tên:</strong> <span id="modal-name"></span></p>
                    <p><strong>Ngày sinh:</strong> <span id="modal-dob"></span></p>
                    <p><strong>Số điện thoại:</strong> <span id="modal-phone"></span></p>
                    <p><strong>Email:</strong> <span id="modal-email"></span></p>
                    <p><strong>Địa chỉ nhận hàng:</strong> <span id="modal-address"></span></p>
                    <p><strong>Số lần đặt hàng:</strong> <span id="modal-orders"></span></p>
                    <p><strong>Thời gian tạo tài khoản:</strong> <span id="modal-created-at"></span></p>
                    <p><strong>Trạng thái:</strong> <span id="modal-status"></span></p>
                </div>
            </div>
            <!-- Footer -->
            <div class="footer">THÔNG TIN</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Set up the map to focus on Vietnam
            var map = L.map('map').setView([14.0583, 108.2772], 6); // Centered on Vietnam
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Add markers for customer locations in Vietnam
            L.marker([21.0285, 105.8542]).addTo(map).bindPopup("Hà Nội - Nhiều khách hàng");
            L.marker([10.8231, 106.6297]).addTo(map).bindPopup("TP. Hồ Chí Minh - Trung bình");
            L.marker([16.0471, 108.2068]).addTo(map).bindPopup("Đà Nẵng - Ít khách hàng");
        });
    </script>
</body>
</html>
